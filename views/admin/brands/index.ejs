<!-- Brands List Page -->
<div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">Manage Brands</h5>
          <div class="card-actions">
            <a href="/admin/brands/new" class="btn btn-sm btn-primary">
              <i class="fas fa-plus"></i> Add New Brand
            </a>
            <form action="/admin/brands/sync-product-counts" method="POST" class="d-inline">
              <button type="submit" class="btn btn-sm btn-outline-secondary">
                <i class="fas fa-sync-alt"></i> Sync Product Counts
              </button>
            </form>
          </div>
        </div>
        <div class="card-body">
          <!-- Search and Filters -->
          <div class="row mb-3">
            <div class="col-md-6">
              <form action="/admin/brands/search" method="GET" class="search-box">
                <div class="input-group">
                  <span class="search-icon"><i class="fas fa-search"></i></span>
                  <input type="text" class="form-control" name="q" placeholder="Search brands..." value="<%= locals.searchTerm || '' %>">
                  <button class="btn btn-outline-secondary" type="submit">Search</button>
                </div>
              </form>
            </div>
          </div>
          
          <!-- Brands Table -->
          <div class="table-responsive">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Logo</th>
                  <th>Name</th>
                  <th>Cashback</th>
                  <th>Products</th>
                  <th>Priority</th>
                  <th class="text-end">Actions</th>
                </tr>
              </thead>
              <tbody>
                <% if (brands && brands.length > 0) { %>
                  <% brands.forEach(function(brand) { %>
                    <tr>
                      <td>
                        <img src="<%= brand.logo_url %>" alt="<%= brand.name %>" class="brand-thumbnail" width="40" height="40">
                      </td>
                      <td><a href="/admin/brands/<%= brand.id %>"><%= brand.name %></a></td>
                      <td><%= brand.cashback_percentage %>%</td>
                      <td><%= brand.products_count || 0 %></td>
                      <td><%= brand.priority || 0 %></td>
                      <td class="text-end table-actions">
                        <a href="/admin/brands/<%= brand.id %>" class="btn btn-sm btn-info" title="View Details">
                          <i class="fas fa-eye"></i>
                        </a>
                        <a href="/admin/brands/<%= brand.id %>/edit" class="btn btn-sm btn-primary" title="Edit">
                          <i class="fas fa-edit"></i>
                        </a>
                        <a href="/admin/brands/<%= brand.id %>/delete" class="btn btn-sm btn-danger" title="Delete">
                          <i class="fas fa-trash"></i>
                        </a>
                      </td>
                    </tr>
                  <% }); %>
                <% } else { %>
                  <tr>
                    <td colspan="6" class="text-center">No brands found</td>
                  </tr>
                <% } %>
              </tbody>
            </table>
          </div>
          
          <!-- Pagination Controls -->
          <% if (locals.pagination && pagination.totalPages > 1) { %>
            <nav aria-label="Page navigation" class="mt-4">
              <ul class="pagination justify-content-center">
                <li class="page-item <%= pagination.page <= 1 ? 'disabled' : '' %>">
                  <a class="page-link" href="/admin/brands?page=<%= pagination.page - 1 %>" tabindex="-1">Previous</a>
                </li>
                
                <% for (let i = 1; i <= pagination.totalPages; i++) { %>
                  <li class="page-item <%= pagination.page === i ? 'active' : '' %>">
                    <a class="page-link" href="/admin/brands?page=<%= i %>"><%= i %></a>
                  </li>
                <% } %>
                
                <li class="page-item <%= pagination.page >= pagination.totalPages ? 'disabled' : '' %>">
                  <a class="page-link" href="/admin/brands?page=<%= pagination.page + 1 %>">Next</a>
                </li>
              </ul>
            </nav>
          <% } %>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Brand Management Tips Card -->
  <div class="row">
    <div class="col-12">
      <div class="card bg-light">
        <div class="card-body">
          <h5 class="card-title">Brand Management Tips</h5>
          <ul class="mb-0">
            <li>Set higher priority values for popular brands to make them appear first.</li>
            <li>Ensure brand logos are clear and recognizable at small sizes.</li>
            <li>Keep cashback percentages competitive but sustainable.</li>
            <li>Use the "Sync Product Counts" button to update the number of products for each brand if they appear incorrect.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>