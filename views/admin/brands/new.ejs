<!-- Add New Brand Page -->
<div class="row mb-4">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title">Add New Brand</h5>
          <div class="card-actions">
            <a href="/admin/brands" class="btn btn-sm btn-outline-secondary">
              <i class="fas fa-arrow-left"></i> Back to Brands
            </a>
          </div>
        </div>
        <div class="card-body">
          <form action="/admin/brands/new" method="POST" enctype="multipart/form-data">
            <div class="row">
              <div class="col-md-8">
                <!-- Brand Information -->
                <div class="mb-3">
                  <label for="name" class="form-label required-field">Brand Name</label>
                  <input type="text" class="form-control" id="name" name="name" value="<%= locals.formData ? formData.name : '' %>" required>
                  <div class="form-text">Enter the official brand name.</div>
                </div>
                
                <div class="mb-3">
                  <label for="cashback_percentage" class="form-label required-field">Cashback Percentage</label>
                  <div class="input-group">
                    <input type="number" class="form-control" id="cashback_percentage" name="cashback_percentage" min="0" max="100" step="0.1" value="<%= locals.formData ? formData.cashback_percentage : '' %>" required>
                    <span class="input-group-text">%</span>
                  </div>
                  <div class="form-text">The percentage of cashback users will receive for this brand's products.</div>
                </div>
                
                <div class="mb-3">
                  <label for="description" class="form-label required-field">Brand Description</label>
                  <textarea class="form-control" id="description" name="description" rows="4" required><%= locals.formData ? formData.description : '' %></textarea>
                  <div class="form-text">Provide a brief description of the brand and its products.</div>
                </div>
                
                <div class="mb-3">
                  <label for="priority" class="form-label">Priority Level</label>
                  <input type="number" class="form-control" id="priority" name="priority" min="0" value="<%= locals.formData ? formData.priority : '0' %>">
                  <div class="form-text">Higher priority brands appear first in listings (0 = lowest priority).</div>
                </div>
              </div>
              
              <div class="col-md-4">
                <!-- Brand Logo Upload -->
                <div class="mb-3">
                  <label for="logo" class="form-label">Brand Logo</label>
                  <div class="custom-file-upload">
                    <input type="file" class="form-control" id="logo" name="logo" accept="image/*">
                    <div id="logoPreview" class="mt-3 text-center">
                      <img src="/images/default-brand-logo.png" alt="Logo Preview" class="img-fluid rounded" style="max-height: 150px; max-width: 100%;">
                    </div>
                  </div>
                  <div class="form-text">Upload a square logo image (PNG or JPG). Recommended size: 200x200px.</div>
                </div>
              </div>
            </div>
            
            <!-- Submit Buttons -->
            <div class="d-flex justify-content-end mt-4">
              <a href="/admin/brands" class="btn btn-light me-2">Cancel</a>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Create Brand
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Logo Preview Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const logoInput = document.getElementById('logo');
      const logoPreview = document.getElementById('logoPreview').querySelector('img');
      
      logoInput.addEventListener('change', function() {
        if (this.files && this.files[0]) {
          const reader = new FileReader();
          
          reader.onload = function(e) {
            logoPreview.src = e.target.result;
          }
          
          reader.readAsDataURL(this.files[0]);
        }
      });
    });
  </script>