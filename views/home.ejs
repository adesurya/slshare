<!-- Category Tabs -->
<div class="categories-section">
  <div class="category-tabs">
    <button class="tab-button active">For You</button>
    <button class="tab-button">Terbaru</button>
    <button class="tab-button">Telepon & Elektronik</button>
    <button class="tab-button">Perawatan & Kecantikan</button>
    <button class="tab-button">Fashion</button>
    <button class="tab-button">Rumah Tangga</button>
  </div>
  
  <!-- Products Section Header with Count and Sort -->
  <div class="products-section-header">
    <div class="products-section-title">Produk Terbaru</div>
    <div class="sort-options">
      <span class="sort-by">Urut berdasarkan:</span>
      <select class="sort-select" id="product-sort">
        <option value="newest">Terbaru</option>
        <option value="price-low">Harga Terendah</option>
        <option value="price-high">Harga Tertinggi</option>
        <option value="cashback">Cashback Tertinggi</option>
      </select>
    </div>
  </div>
  
  <!-- Dynamic Product Grid -->
  <div class="category-products">
    <% if (featuredProducts && featuredProducts.length > 0) { %>
      <% featuredProducts.forEach(product => { %>
        <!-- Product Card -->
        <div class="product-card">
          <a href="/products/<%= product.id %>">
            <div class="product-image">
              <img src="<%= product.image_url || '/images/placeholder.jpg' %>" alt="<%= product.name %>" loading="lazy">
              <div class="cashback-badge">
                <%= (product.cashback && product.cashback.percentage) ? product.cashback.percentage : 0 %>% Cashback
              </div>
            </div>
            <div class="product-info">
              <h3 class="product-name"><%= product.name %></h3>
              <div class="product-price">
                Rp<%= (product.price) ? product.price.toLocaleString('id-ID') : '0' %>
              </div>
              <div class="product-cashback">
                <span class="cashback-label">Est. Cashback</span>
                <span class="cashback-amount">
                  Rp<%= (product.cashback && product.cashback.amount) ? product.cashback.amount.toLocaleString('id-ID') : '0' %>
                </span>
              </div>
            </div>
          </a>
        </div>
      <% }); %>
    <% } else { %>
      <!-- Fallback content for development/demo -->
      <!-- Product Card 1 -->
      <div class="product-card">
        <a href="/products/1">
          <div class="product-image">
            <img src="/path/to/product1.jpg" alt="Test Product UI Baru" loading="lazy">
            <div class="cashback-badge">7% Cashback</div>
          </div>
          <div class="product-info">
            <h3 class="product-name">Test Product UI Baru</h3>
            <div class="product-price">Rp88.888</div>
            <div class="product-cashback">
              <span class="cashback-label">Est. Cashback</span>
              <span class="cashback-amount">Rp6.222</span>
            </div>
          </div>
        </a>
      </div>
      
      <!-- Product Card 2 -->
      <div class="product-card">
        <a href="/products/2">
          <div class="product-image">
            <img src="/images/placeholder.jpg" alt="Smart Watch" loading="lazy">
            <div class="cashback-badge">2% Cashback</div>
          </div>
          <div class="product-info">
            <h3 class="product-name">Smart Watch</h3>
            <div class="product-price">Rp1.299.000</div>
            <div class="product-cashback">
              <span class="cashback-label">Est. Cashback</span>
              <span class="cashback-amount">Rp25.980</span>
            </div>
          </div>
        </a>
      </div>
    <% } %>
  </div>
  
  <!-- Loading Indicator (hidden initially) -->
  <div class="loading-indicator" style="display: none;">
    <div class="loading-spinner"></div>
    <p>Memuat lebih banyak produk...</p>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Fungsionalitas tab kategori
    const tabButtons = document.querySelectorAll('.tab-button');
    
    tabButtons.forEach(button => {
      button.addEventListener('click', function() {
        // Remove active class from all buttons
        tabButtons.forEach(btn => btn.classList.remove('active'));
        
        // Add active class to clicked button
        this.classList.add('active');
        
        // Here you would normally load products for selected category
        // For demo, just show loading indicator
        const loadingIndicator = document.querySelector('.loading-indicator');
        loadingIndicator.style.display = 'flex';
        
        // Hide loading after 1 second (simulate loading)
        setTimeout(() => {
          loadingIndicator.style.display = 'none';
        }, 1000);
      });
    });
    
    // Sort functionality
    const sortSelect = document.getElementById('product-sort');
    if (sortSelect) {
      sortSelect.addEventListener('change', function() {
        // Here you would sort products based on selection
        console.log('Sorting by: ' + this.value);
        
        // For demo, just show loading indicator
        const loadingIndicator = document.querySelector('.loading-indicator');
        loadingIndicator.style.display = 'flex';
        
        // Hide loading after 1 second (simulate loading)
        setTimeout(() => {
          loadingIndicator.style.display = 'none';
        }, 1000);
      });
    }
  });
</script>